(this.webpackJsonpranktogether=this.webpackJsonpranktogether||[]).push([[0],{190:function(e,t,n){},191:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(157),i=n.n(r),s=n(7),o=n(9),l=n(223),j=n(226),d=n(1);var u=function(e){var t=e.board,n=Object(o.m)(),a=new Date(t.end_date).toLocaleDateString("en-US",{year:"numeric",month:"numeric",day:"numeric"});return Object(d.jsxs)(l.a,{className:"card-board-scroll",children:[Object(d.jsx)("img",{className:"card-size-homepage",onClick:function(){return e=t.id,void n("/board/".concat(e));var e},src:"https://storage.googleapis.com/ranktogether-images/".concat(t.options[0].option_image),wrapped:"true",ui:"false"}),Object(d.jsxs)(l.a.Content,{children:[Object(d.jsx)(l.a.Header,{children:t.title}),Object(d.jsx)(l.a.Meta,{children:Object(d.jsxs)(j.a,{as:"h4",onClick:function(){return e=t.user.id,void n("/profile/".concat(e));var e},className:"username",children:["Creator: ",t.user.username]})}),Object(d.jsxs)(l.a.Description,{children:["End Date: ",a]})]})]})};var b=function(e){var t=e.boards,n=e.category,a=e.page,c=t.filter((function(e){return e.category===n})).filter((function(e){var t=(new Date).getTime(),n=new Date(e.end_date).getTime();return"home"===a?n>=t:n<t})).map((function(e,t){return Object(d.jsx)(u,{board:e},t)}));return Object(d.jsx)(d.Fragment,{children:c})},O={ESPORTS:"eSports",GAMES:"Games",ANIMALS:"Animals",MOVIES:"Movies",SPORTS:"Sports",RELATIONSHIPS:"Relationships",TECHNOLOGY:"Technology",BUSINESS:"Business",MUSIC:"Music",FOOD:"Food",OTHER:"Other"};var h=function(e){var t=e.boards,n=e.page,a=Object.keys(O).map((function(e){return O[e]})).sort((function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())})).map((function(e){return Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"header-margin",children:Object(d.jsx)(j.a,{size:"large",children:e})}),Object(d.jsx)("div",{className:"board-margin",children:Object(d.jsx)(l.a.Group,{className:"board-scroll",children:Object(d.jsx)(b,{category:e,boards:t,page:n})})})]},e)}));return Object(d.jsx)("div",{className:"home",children:a})},m=n.p+"static/media/RankTogether.a6288087.png";var p=function(){return Object(d.jsx)("div",{children:Object(d.jsx)("img",{src:m,alt:"RankTogether GIF",id:"main-header"})})},f=n(22),x=c.a.createContext({user:null,signin:function(){},signout:function(){},setUser:function(){}}),g=n(215),v=n(48);var C=function(){Object(o.m)(),Object(o.j)();var e=Object(a.useState)("Home"),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useContext)(x);return Object(d.jsxs)(g.a,{className:"nav",inverted:!0,children:[Object(d.jsx)(g.a.Item,{name:"home",active:"home"===n,onClick:function(){return c("Home")},children:Object(d.jsx)(f.b,{to:"/",children:" Home "})}),Object(d.jsx)(g.a.Item,{name:"completed",active:"completed"===n,onClick:function(){return c("Completed")},children:Object(d.jsx)(f.b,{to:"/completed",children:" Completed "})}),Object(d.jsx)(g.a.Item,{name:"create",active:"create"===n,onClick:function(){return c("Create")},children:Object(d.jsx)(f.b,{to:"/create",children:" Create "})}),Object(d.jsx)(g.a.Item,{name:"leaders",active:"leaders"===n,onClick:function(){return c("Leaders")},children:Object(d.jsx)(f.b,{to:"/leaders",children:" Leaders "})}),r.user?Object(d.jsx)(g.a.Item,{name:"profile",active:"profile"===n,onClick:function(){return c("Profile")},position:"right",children:Object(d.jsx)(f.b,{to:"/profile/".concat(r.user.id),children:Object(d.jsx)(v.a,{name:"user circle"})})}):Object(d.jsx)(g.a.Item,{name:"login",active:"login"===n,onClick:function(){return c("Login")},position:"right",children:Object(d.jsx)(f.b,{to:"/login",children:"Login"})})]})},y=n(13),N=n(21);var S=function(e){var t=e.children,n=Object(a.useState)(null),c=Object(s.a)(n,2),r=c[0],i=c[1];Object(a.useEffect)((function(){fetch("/api/me").then((function(e){return e.json()})).then((function(e){e.errors||i(e)})).catch((function(e){console.log(e)}))}),[]);var o=function(){var e=Object(N.a)(Object(y.a)().mark((function e(t,n){var a;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})},e.abrupt("return",fetch("/api/login",a).then((function(e){return e.json()})).then((function(e){return e.error||i(e),e})).catch((function(e){console.log(e)})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=Object(N.a)(Object(y.a)().mark((function e(){return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/logout",{method:"DELETE"}).then((function(){i(null)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j={user:r,signin:o,signout:l,setUser:i};return Object(d.jsx)(x.Provider,{value:j,children:t})};var k=function(e){var t=e.children,n=Object(a.useContext)(x),c=Object(o.j)();return n.user?t:Object(d.jsx)(o.a,{to:"/login",state:{from:c},replace:!0})},w=n(216),F=n(30),D=n(194),T=n(214),A=n(224);var E=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),i=Object(s.a)(r,2),l=i[0],u=i[1],b=Object(a.useState)(""),O=Object(s.a)(b,2),h=O[0],m=O[1],p=Object(a.useState)(""),f=Object(s.a)(p,2),x=f[0],g=f[1],C=Object(a.useState)(""),y=Object(s.a)(C,2),N=y[0],S=y[1],k=Object(a.useState)(""),E=Object(s.a)(k,2),_=E[0],I=E[1],P=Object(a.useState)(""),R=Object(s.a)(P,2),U=R[0],L=R[1],M=Object(a.useState)(""),B=Object(s.a)(M,2),J=B[0],H=B[1],z=Object(a.useState)(null),G=Object(s.a)(z,2),V=G[0],Y=G[1],X=Object(a.useState)(!1),$=Object(s.a)(X,2),q=($[0],$[1]),K=Object(o.m)();return Object(d.jsxs)("div",{className:"login-padding",children:[Object(d.jsxs)(j.a,{as:"h2",icon:!0,textAlign:"center",children:[Object(d.jsx)(v.a,{name:"user"}),"Create an Account!"]}),Object(d.jsx)("div",{className:"login-form",children:Object(d.jsxs)(w.a,{onSubmit:function(e){e.preventDefault(),H([]),q(!0);var t=new FormData;t.append("avatar",V),t.append("name",n),t.append("username",l),t.append("email",h),t.append("password",x),t.append("password",_),t.append("gender",U),t.append("date_of_birth",N),fetch("/api/signup",{method:"POST",headers:{Accept:"application/json"},body:t}).then((function(e){q(!1),e.ok?e.json().then((function(){return K("/login")})):e.json().then((function(e){return H(e.errors)}))}))},errors:0==J.length?"false":"true",children:[Object(d.jsxs)(w.a.Field,{children:[Object(d.jsx)("label",{children:"Name"}),Object(d.jsx)("input",{type:"text",name:"Name",placeholder:"Name",value:n,onChange:function(e){return c(e.target.value)}})]}),Object(d.jsxs)(w.a.Field,{children:[Object(d.jsx)("label",{children:"Username"}),Object(d.jsx)("input",{type:"text",name:"Username",placeholder:"Username",value:l,onChange:function(e){return u(e.target.value)}})]}),Object(d.jsxs)(w.a.Field,{children:[Object(d.jsx)("label",{children:"Email"}),Object(d.jsx)("input",{type:"email",name:"Email",placeholder:"Email",value:h,onChange:function(e){return m(e.target.value)}})]}),Object(d.jsxs)(w.a.Field,{children:[Object(d.jsx)("label",{children:"Password"}),Object(d.jsx)("input",{type:"password",name:"Password",placeholder:"Password",value:x,onChange:function(e){return g(e.target.value)}})]}),Object(d.jsxs)(w.a.Field,{children:[Object(d.jsx)("label",{children:"Re-enter Password"}),Object(d.jsx)("input",{type:"password",name:"Password",placeholder:"Re-enter your password",value:_,onChange:function(e){return I(e.target.value)}})]}),Object(d.jsxs)(w.a.Field,{children:[Object(d.jsx)("label",{children:"Birthdate"}),Object(d.jsx)("input",{type:"date",name:"Birthdate",placeholder:"Enter your date of birth",value:N,min:"1922-01-01",max:"2022-12-31",onChange:function(e){return S(e.target.value)}})]}),Object(d.jsxs)(F.a,{children:[Object(d.jsx)("label",{children:"Upload your avatar!"}),Object(d.jsx)(w.a.Input,{fluid:!0,label:"Avatar Chosen: ",placeholder:"Use button below to find your avatar",readOnly:!0,value:null===V||void 0===V?void 0:V.name}),Object(d.jsxs)(D.a,{as:"label",htmlFor:"file",type:"button",animated:"fade",children:[Object(d.jsx)(D.a.Content,{visible:!0,children:Object(d.jsx)(v.a,{name:"file"})}),Object(d.jsx)(D.a.Content,{hidden:!0,children:"Choose an Avatar"})]}),Object(d.jsx)("input",{type:"file",id:"file",hidden:!0,onChange:function(e){Y(e.target.files[0])}})]}),Object(d.jsx)(T.a,{placeholder:"Gender",fluid:!0,selection:!0,options:[{key:"Male",text:"Male",value:"Male"},{key:"Female",text:"Female",value:"Female"},{key:"Nonbinary",text:"Nonbinary",value:"Nonbinary"},{key:"Prefer not to answer",text:"Prefer not to answer",value:"Prefer noy to answer"}],onChange:function(e,t){return function(e,t){L(t.value)}(0,t)},value:U}),0!==J.length?Object(d.jsx)(A.a,{error:!0,header:"Action Forbidden",content:J}):null,Object(d.jsx)(D.a,{secondary:!0,style:{marginTop:"20px"},type:"submit",children:"Submit"})]})})]})};var _=function(){var e,t,n=Object(a.useState)(""),c=Object(s.a)(n,2),r=c[0],i=c[1],l=Object(a.useState)(""),j=Object(s.a)(l,2),u=j[0],b=j[1],O=Object(o.m)(),h=Object(o.j)(),m=Object(a.useContext)(x),p=Object(a.useState)(""),f=Object(s.a)(p,2),g=(f[0],f[1]),v=(null===(e=h.state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname)||"/";return Object(d.jsx)("div",{className:"login-padding",children:Object(d.jsx)("div",{className:"login-form",children:Object(d.jsxs)(w.a,{onSubmit:function(e){e.preventDefault(),m.signin(r,u).then((function(e){e.error?g(e.error):O(v,{replace:!0}),console.log(e)}))},children:[Object(d.jsxs)(w.a.Field,{children:[Object(d.jsx)("label",{children:"Username"}),Object(d.jsx)("input",{type:"text",onChange:function(e){return i(e.target.value)},placeholder:"Username"})]}),Object(d.jsxs)(w.a.Field,{children:[Object(d.jsx)("label",{children:"Password"}),Object(d.jsx)("input",{type:"password",value:u,onChange:function(e){return b(e.target.value)},placeholder:"Password"})]}),Object(d.jsx)(D.a,{secondary:!0,type:"submit",children:" Login "}),Object(d.jsx)("div",{children:Object(d.jsx)(D.a,{secondary:!0,style:{marginTop:"10px"},onClick:function(){O("/signup")},children:"Sign-up"})})]})})})},I=n(105),P=n(19),R=n(208),U=n(209),L=n(227),M=n.p+"static/media/CreateBoard.905d04b6.png";var B=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),i=Object(s.a)(r,2),j=i[0],u=i[1],b=Object(a.useState)([]),h=Object(s.a)(b,2),m=h[0],p=h[1],f=Object(a.useState)(""),x=Object(s.a)(f,2),g=x[0],C=x[1],y=Object(a.useState)(V()),N=Object(s.a)(y,2),S=N[0],k=N[1],A=Object(a.useState)(""),E=Object(s.a)(A,2),_=(E[0],E[1]),B=Object(a.useState)(""),J=Object(s.a)(B,2),H=J[0],z=J[1],G=Object(o.m)();function V(){var e=new Date;e.setDate(e.getDate()+1);var t=("0"+e.getDate()).slice(-2),n=("0"+(e.getMonth()+1)).slice(-2),a=e.getFullYear();return"".concat(a,"-").concat(n,"-").concat(t)}var Y=Object.keys(O).map((function(e){return{key:e,value:O[e],text:O[e]}}));return Object(d.jsxs)("div",{className:"create-form",children:[Object(d.jsx)("img",{src:M,alt:"CreateBoard",className:"create-board"}),Object(d.jsxs)(w.a,{onSubmit:function(e){if(console.log("getting called"),e.preventDefault(),m.length<2)alert("Not enough options, min 2");else{_([]);var t=new FormData;t.append("title",n),t.append("description",j),t.append("category",g),t.append("end_date",S);H.split(",").map((function(e){t.append("tags[]",e.trim())}));m.map((function(e,n){t.append("options[]name",e.name),t.append("options[]option_image",e.option_image)})),fetch("/api/boards",{method:"POST",headers:{Accept:"application/json"},body:t}).then((function(e){return e.json()})).then((function(e){G("/board/".concat(e.id))}))}},children:[Object(d.jsxs)(w.a.Field,{children:[Object(d.jsx)("label",{children:"Title"}),Object(d.jsx)(R.a,{type:"text",name:"title",placeholder:"Title",value:n,onChange:function(e){return c(e.target.value)}})]}),Object(d.jsxs)(w.a.Field,{children:[Object(d.jsx)("label",{children:"Description"}),Object(d.jsx)(U.a,{type:"text",name:"description",placeholder:"Description",value:j,onChange:function(e){return u(e.target.value)}})]}),Object(d.jsx)("div",{className:"options-container",children:Object(d.jsx)(L.a,{children:Object(d.jsx)(L.a.Row,{columns:3,children:m.map((function(e,t){return Object(d.jsx)(L.a.Column,{children:Object(d.jsxs)(l.a,{children:[Object(d.jsxs)("div",{className:"card-img-container",children:[Object(d.jsx)("div",{className:"option-delete-btn",children:Object(d.jsx)(D.a,{type:"button",circular:!0,icon:"delete",onClick:function(e){return function(e,t){var n=Object(P.a)(m);n.splice(t,1),p(n)}(0,t)}})}),Object(d.jsx)("img",{className:"card-img",src:URL.createObjectURL(e.option_image)})]}),Object(d.jsx)(l.a.Content,{children:Object(d.jsx)(l.a.Header,{children:Object(d.jsx)(R.a,{value:e.name,size:"large",placeholder:"Option Title",onChange:function(e){return function(e,t){var n=Object(P.a)(m),a=Object(I.a)({},n[t]);a.name=e.target.value,n[t]=a,p(n)}(e,t)}})})})]})},t)}))})})}),Object(d.jsxs)(F.a,{children:[Object(d.jsx)("label",{children:"Upload your options (min. 2 options - max. 6 options)"}),Object(d.jsxs)(D.a,{as:"label",htmlFor:"file",type:"button",animated:"fade",children:[Object(d.jsx)(D.a.Content,{visible:!0,children:Object(d.jsx)(v.a,{name:"file"})}),Object(d.jsx)(D.a.Content,{hidden:!0,children:"Upload Options!"})]}),Object(d.jsx)("input",{multiple:"multiple",type:"file",id:"file",hidden:!0,onChange:function(e){if(m.length+e.target.files.length>6)return alert("MAX options is 6!"),null;var t=Object(P.a)(e.target.files).map((function(e){return{name:e.name,option_image:e}}));p([].concat(Object(P.a)(m),Object(P.a)(t)))}})]}),Object(d.jsxs)(w.a.Field,{children:[Object(d.jsx)("label",{children:"Category"}),Object(d.jsx)(T.a,{placeholder:"Select Category",fluid:!0,search:!0,selection:!0,onChange:function(e,t){return function(e,t){C(t.value)}(0,t)},options:Y,value:g})]}),Object(d.jsxs)(w.a.Field,{children:[Object(d.jsx)("label",{children:"Tags"}),Object(d.jsx)(U.a,{type:"text",name:"tags",placeholder:"Tags",value:H,onChange:function(e){return z(e.target.value)}})]}),Object(d.jsxs)(w.a.Field,{children:[Object(d.jsx)("label",{children:"End Date"}),Object(d.jsx)("input",{type:"date",name:"End Date",value:S,min:V(),max:function(){var e=new Date;e.setDate(e.getDate()+14);var t=("0"+e.getDate()).slice(-2),n=("0"+(e.getMonth()+1)).slice(-2),a=e.getFullYear();return"".concat(a,"-").concat(n,"-").concat(t)}(),onChange:function(e){return k(e.target.value)}})]}),Object(d.jsx)(D.a,{secondary:!0,type:"submit",children:"Create Board!"})]})]})},J=n(211),H=n(225),z=n(210),G=n.p+"static/media/Ribbon.7a8f8292.png";var V=function(e){var t=e.group,n=Object(a.useState)([]),c=Object(s.a)(n,2),r=c[0],i=c[1],l=Object(a.useState)(!0),u=Object(s.a)(l,2),b=u[0],O=u[1],h=Object(o.m)();function m(e){h("/profile/".concat(e))}return Object(a.useEffect)((function(){fetch("rankers"===t?"/api/votes/toprankers":"/api/votes/topcreators").then((function(e){return e.json()})).then((function(e){i(e),O(!1)}))}),[]),Object(d.jsx)(d.Fragment,{children:b?Object(d.jsx)(H.a,{active:!0,children:Object(d.jsx)(z.a,{size:"massive",children:"Loading"})}):Object(d.jsxs)("div",{children:[r.length>=1?Object(d.jsx)("div",{className:"top-rank-image",children:Object(d.jsxs)("div",{onClick:function(){return m(r[0].user_id)},className:"ribbon-position",children:[Object(d.jsx)("img",{className:"rank-image-size",size:"medium",src:"https://storage.googleapis.com/ranktogether-images/".concat(r[0].avatar)}),Object(d.jsx)("img",{className:"ribbon",src:G}),Object(d.jsx)("div",{className:"header-topvoters",children:Object(d.jsxs)(j.a,{textAlign:"center",as:"h1",children:["#1: ",r[0].username]})})]})}):null,r.length>=3?Object(d.jsxs)("div",{className:"rest-rank-image",children:[Object(d.jsxs)("div",{className:"pointer-cursor",onClick:function(){return m(r[1].user_id)},children:[Object(d.jsx)("img",{className:"rank-image-size",src:"https://storage.googleapis.com/ranktogether-images/".concat(r[1].avatar)}),Object(d.jsx)("div",{className:"header-topvoters",children:Object(d.jsxs)(j.a,{textAlign:"center",as:"h2",children:["#2: ",r[1].username]})})]}),Object(d.jsxs)("div",{className:"pointer-cursor",onClick:function(){return m(r[2].user_id)},children:[Object(d.jsx)("img",{className:"rank-image-size",src:"https://storage.googleapis.com/ranktogether-images/".concat(r[2].avatar)}),Object(d.jsx)("div",{className:"header-topvoters",children:Object(d.jsxs)(j.a,{textAlign:"center",as:"h2",children:["#3: ",r[2].username]})})]})]}):null]})})},Y=n.p+"static/media/TRBanner.4433c072.png",X=n.p+"static/media/TCBanner.65111173.png";var $=function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)("img",{src:Y,alt:"TRBanner",className:"border-list"}),Object(d.jsx)(V,{group:"rankers"}),Object(d.jsx)(J.a,{inverted:!0,section:!0}),Object(d.jsx)("img",{src:X,alt:"TCBanner",className:"border-list"}),Object(d.jsx)(V,{group:"creators"})]})},q=n(163),K=n(220),Q=n(222),W=n(228),Z=n(221);var ee=function(e){var t=e.users,n=Object(o.m)(),a=t.map((function(e){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(Z.a,{children:Object(d.jsx)(Z.a.Item,{children:Object(d.jsxs)(j.a,{className:"followers-header",as:"h3",onClick:function(){return t=e.user_id,void n("/profile/".concat(t));var t},children:[Object(d.jsx)(q.a,{circular:!0,src:"https://storage.googleapis.com/ranktogether-images/".concat(e.avatar)}),e.username]})})},e.user_id)})}));return Object(d.jsx)("div",{className:"followers-list",children:a})};var te=function(e){var t=e.user,n=e.tab,c=Object(a.useState)([]),r=Object(s.a)(c,2),i=r[0],o=r[1];Object(a.useEffect)((function(){if(null!=(null===t||void 0===t?void 0:t.id)){var e="created"===n?"/api/boards/user/".concat(t.id):"/api/boards/ranked/".concat(t.id);fetch(e).then((function(e){return e.json()})).then((function(e){o(e)}))}}),[t,n]);var j=i.map((function(e){return Object(d.jsx)(u,{board:e},e.id)}));return Object(d.jsx)("div",{children:Object(d.jsx)(l.a.Group,{itemsPerRow:4,children:j})})};var ne=function(){var e,t,n,c=Object(a.useContext)(x),r=Object(o.m)(),i=Object(a.useState)(""),l=Object(s.a)(i,2),u=l[0],b=l[1],O=Object(a.useState)({}),h=Object(s.a)(O,2),m=h[0],p=h[1],f=Object(a.useState)(!1),C=Object(s.a)(f,2),y=C[0],N=C[1],S=Object(a.useState)("Created"),k=Object(s.a)(S,2),F=k[0],T=k[1],A=Object(o.o)();return Object(a.useEffect)((function(){var e;(null===(e=c.user)||void 0===e?void 0:e.id)===parseInt(A.id)?p(c.user):fetch("/api/users/".concat(A.id)).then((function(e){return e.json()})).then((function(e){p(e)}))}),[A.id,c.user]),Object(d.jsxs)("div",{children:[(null===(e=c.user)||void 0===e?void 0:e.id)===(null===m||void 0===m?void 0:m.id)?Object(d.jsxs)(j.a,{className:"profile-form",as:"h2",icon:!0,children:[Object(d.jsx)(v.a,{name:"user circle"}),"My Profile"]}):null,Object(d.jsxs)("div",{className:"image-profile",children:[(null===(t=c.user)||void 0===t?void 0:t.id)===(null===m||void 0===m?void 0:m.id)?Object(d.jsx)(D.a,{secondary:!0,onClick:function(){c.signout().then((function(){return r("/")}))},className:"logout-button",children:"Logout"}):null,Object(d.jsx)(j.a,{className:"header-padding",as:"h1",textAlign:"center",children:m.username}),Object(d.jsx)(q.a,{className:"border-image",src:"https://storage.googleapis.com/ranktogether-images/".concat(m.avatar),size:"medium",circular:!0,centered:!0}),Object(d.jsx)(K.a.Description,{children:Object(d.jsx)(j.a,{className:"header-padding",as:"h2",textAlign:"center",children:m.bio})}),(null===(n=c.user)||void 0===n?void 0:n.id)===m.id?Object(d.jsxs)("div",{children:[Object(d.jsxs)(Q.a,{closeIcon:!0,open:y,trigger:Object(d.jsx)(D.a,{secondary:!0,className:"button-center",children:"About Me"}),onClose:function(){return N(!y)},onOpen:function(){return N(!y)},centered:!0,children:[Object(d.jsx)(j.a,{icon:"pencil alternate",content:"About Me"}),Object(d.jsxs)(w.a,{onSubmit:function(e){e.preventDefault();var t={method:"PATCH",headers:{"Content-type":"application/json",Accepts:"application/json"},body:JSON.stringify({bio:u})};fetch("/api/users/".concat(m.id),t).then((function(e){return e.json()})).then((function(e){p(e),N(!y),c.setUser(e)}))},children:[Object(d.jsx)(U.a,{type:"text",name:"bio",placeholder:"Tell us about yourself",value:u,onChange:function(e){return b(e.target.value)}}),Object(d.jsx)(R.a,{type:"submit",className:"button-margin"})]})]}),Object(d.jsxs)("div",{className:"avatar-button-container",children:[Object(d.jsx)(D.a,{secondary:!0,as:"label",htmlFor:"file",type:"button",children:Object(d.jsx)(D.a.Content,{children:"Choose an Avatar"})}),Object(d.jsx)("input",{type:"file",id:"file",hidden:!0,onChange:function(e){if(!(e.target.files.length<1)){var t=new FormData;t.append("avatar",e.target.files[0]),fetch("/api/users/".concat(c.user.id),{method:"PATCH",headers:{Accept:"application/json"},body:t}).then((function(e){return e.json()})).then((function(e){c.setUser(e)}))}}})]})]}):null,Object(d.jsxs)(d.Fragment,{children:[null==c.user||c.user.id===m.id?null:Object(d.jsx)("div",{children:function(){var e,t=null===(e=c.user)||void 0===e?void 0:e.followings;return null==(null===t||void 0===t?void 0:t.find((function(e){return e.user_id===m.id})))}()?Object(d.jsx)(D.a,{className:"button-center",positive:!0,onClick:function(e){e.preventDefault();var t={method:"POST",headers:{"Content-type":"application/json",Accepts:"application/json"},body:JSON.stringify({user_id:m.id})};fetch("/api/follow",t).then((function(e){return e.json()})).then((function(e){var t=JSON.parse(JSON.stringify(c.user)),n=e.user;t.followings.push({user_id:n.id,username:n.username,avatar:n.avatar}),c.setUser(t)}))},children:"\ud83d\udc49 Follow"}):Object(d.jsx)(D.a,{className:"button-center",negative:!0,onClick:function(e){e.preventDefault();var t={method:"DELETE",headers:{"Content-type":"application/json",Accepts:"application/json"},body:JSON.stringify({user_id:m.id})};fetch("/api/unfollow",t).then((function(){var e=JSON.parse(JSON.stringify(c.user));e.followings=e.followings.filter((function(e){return m.id!==e.user_id})),c.setUser(e)}))},children:"Unfollow"})})," "]}),Object(d.jsxs)("div",{className:"profile-navbar",children:[Object(d.jsxs)(g.a,{pointing:!0,secondary:!0,children:[Object(d.jsx)(g.a.Item,{name:"Created",active:"Created"===F,onClick:function(){return T("Created")}}),Object(d.jsx)(g.a.Item,{name:"Ranked",active:"Ranked"===F,onClick:function(){return T("Ranked")}}),Object(d.jsx)(g.a.Item,{name:"Followers",active:"Followers"===F,onClick:function(){return T("Followers")}}),Object(d.jsx)(g.a.Item,{name:"Following",active:"Following"===F,onClick:function(){return T("Following")}})]}),Object(d.jsx)(W.a,{children:function(){switch(F){case"Created":return Object(d.jsx)(te,{user:m,tab:"created"});case"Ranked":return Object(d.jsx)(te,{user:m,tab:"ranked"});case"Followers":return Object(d.jsx)(ee,{users:m.followers});case"Following":return Object(d.jsx)(ee,{users:m.followings})}}()})]})]})]})},ae=n(219),ce=n(195),re="card",ie=n(217),se=n(218);var oe=function(e){var t=e.option,n=e.idx,c=e.moveCard,r=e.userVote,i=e.isBoardCompleted,o=Object(a.useRef)(null),u=Object(ie.a)({accept:re,collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var a;if(o.current){var s=e.index,l=n;if(s!==l){var j=null===(a=o.current)||void 0===a?void 0:a.getBoundingClientRect(),d=(j.bottom-j.top)/2,u=t.getClientOffset().y-j.top;s<l&&u<d||s>l&&u>d||(null!=r||i||c(s,l),e.index=l)}}}}),b=Object(s.a)(u,2),O=b[0].handlerId,h=b[1],m=Object(se.a)({type:re,item:function(){return{id:t.id,index:n}},collect:function(e){return{isDragging:e.isDragging()}}}),p=Object(s.a)(m,2);return p[0].isDragging,(0,p[1])(h(o)),Object(d.jsx)(ce.a,{innerRef:o,children:Object(d.jsx)(L.a.Column,{"data-handler-id":O,children:Object(d.jsxs)(l.a,{centered:!0,className:i?"card-margin":"card-margin cursor-grab",children:[null!=r?Object(d.jsx)("div",{className:"one-option-vote",children:Object(d.jsxs)(j.a,{textAlign:"center",as:"h2",children:["Your rank: ",function(){if(null!=r)return r.rankings.indexOf(t.id)+1}()]})}):null,Object(d.jsx)("div",{className:"card-img-container",children:Object(d.jsx)("img",{className:"card-img",src:"https://storage.googleapis.com/ranktogether-images/".concat(t.option_image)})}),Object(d.jsx)(l.a.Content,{children:Object(d.jsxs)(l.a.Header,{children:[Object(d.jsx)("div",{className:"board-option-name",children:t.name}),Object(d.jsx)("div",{className:"board-option-number",children:Object(d.jsxs)("h4",{children:[" ",n+1," "]})})]})})]})})})},le=n(161),je=n.n(le),de=n(213),ue=n(162);var be=function(e){var t,n=e.comment,c=(e.idx,e.removeComment),r=e.handleClickCreator,i=Object(a.useContext)(x),s=new Date(n.created_at).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"numeric",day:"numeric"});return Object(d.jsxs)(ae.a,{children:[Object(d.jsx)(ae.a.Avatar,{className:"avatar-border",src:"https://storage.googleapis.com/ranktogether-images/".concat(n.avatar)}),Object(d.jsxs)(ae.a.Content,{children:[Object(d.jsx)(ae.a.Author,{onClick:function(){return r(n.user_id)},as:"a",children:n.username}),Object(d.jsx)(ae.a.Metadata,{children:Object(d.jsx)("div",{children:s})}),Object(d.jsx)(ae.a.Text,{children:n.message}),Object(d.jsx)(ae.a.Actions,{children:(null===(t=i.user)||void 0===t?void 0:t.id)===n.user_id?Object(d.jsx)(D.a,{onClick:function(){return c(n)},circular:!0,icon:"delete"}):null})]})]})};var Oe=function(){var e=Object(a.useContext)(x),t=Object(o.o)(),n=parseInt(t.id),c=Object(a.useState)(null),r=Object(s.a)(c,2),i=r[0],l=r[1],u=Object(a.useState)([]),b=Object(s.a)(u,2),O=b[0],h=b[1],m=Object(a.useState)([]),p=Object(s.a)(m,2),f=p[0],g=p[1],v=Object(a.useState)(""),C=Object(s.a)(v,2),y=C[0],N=C[1],S=Object(o.m)();function k(e){S("/profile/".concat(e))}Object(a.useEffect)((function(){fetch("/api/boards/".concat(n)).then((function(e){return e.json()})).then((function(e){l(e),A()&&(e.options=e.options.sort((function(e,t){return t.score-e.score}))),h(e.options),g(e.comments)}))}),[e.user]);var F=Object(a.useCallback)((function(e,t){h((function(n){return je()(n,{$splice:[[e,1],[t,0,n[e]]]})}))}),[]);function T(){if(i){var e=(new Date).getTime();return new Date(i.end_date).getTime()<e}}function A(){var t;return null!=(null===(t=e.user)||void 0===t?void 0:t.votes.find((function(e){return(null===i||void 0===i?void 0:i.id)===e.board_id})))}function E(){var t;return null===(t=e.user)||void 0===t?void 0:t.votes.find((function(e){return(null===i||void 0===i?void 0:i.id)===e.board_id}))}function _(){var t;return null==(null===(t=e.user)||void 0===t?void 0:t.id)}function I(e){fetch("/api/comments/".concat(e.id),{method:"DELETE",headers:{"Content-type":"application/json",Accepts:"application/json"}}).then((function(){for(var t=Object(P.a)(f),n=0,a=0;a<t.length;a++){if(t[a].id===e.id){n=a;break}}t.splice(n,1),g(t)}))}var R=O.map((function(e,t){return Object(d.jsx)(oe,{option:e,idx:t,isBoardCompleted:T(),moveCard:F,userVote:E()},e.id)})),U=f.map((function(e,t){return Object(d.jsx)(be,{comment:e,idx:t,removeComment:I,handleClickCreator:k},e.id)}));return Object(d.jsxs)(de.a,{backend:ue.a,children:[Object(d.jsx)("div",{children:null===i?Object(d.jsx)(H.a,{active:!0,children:Object(d.jsx)(z.a,{size:"massive",children:"Loading"})}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"header-board",children:[Object(d.jsx)(j.a,{as:"h1",children:i.title}),Object(d.jsx)(j.a,{as:"h2",children:i.description}),Object(d.jsx)(j.a,{className:"creator-click",onClick:function(){return k(i.user.id)},as:"h3",children:i.user.username})]}),Object(d.jsx)("div",{children:A()?Object(d.jsxs)(j.a,{className:"total-votes",as:"h2",children:["Total Votes: ",i.vote_count]}):null}),Object(d.jsx)(L.a,{className:function(){var e=O.length;return 2===e||4===e?"grid-margin grid-width-30":"grid-margin grid-width-50"}(),centered:!0,children:Object(d.jsx)(L.a.Row,{columns:function(){var e=O.length;return 2===e||4===e?2:3}(),children:R})})]})}),Object(d.jsx)("div",{className:"vote-button",children:T()?Object(d.jsx)("h1",{children:" Board is Completed! "}):Object(d.jsx)(d.Fragment,{children:A()?null:Object(d.jsx)(D.a,{onClick:function(t){t.preventDefault(),_()&&S("/login");var n=O.map((function(e){return e.id})),a={method:"POST",headers:{"Content-type":"application/json",Accepts:"application/json"},body:JSON.stringify({board_id:i.id,rankings:n})};fetch("/api/votes",a).then((function(e){return e.json()})).then((function(t){e.setUser(t.user)}))},size:"huge",secondary:!0,children:_()?"Login to vote!":"Vote!"})})}),Object(d.jsxs)("div",{className:"comments-section",children:[Object(d.jsx)(ae.a.Group,{children:Object(d.jsxs)(j.a,{as:"h3",dividing:!0,children:["Comments!",U]})}),Object(d.jsxs)(w.a,{children:[_()?null:Object(d.jsx)(w.a.TextArea,{className:"comment-box",value:y,onChange:function(e){return N(e.target.value)}}),Object(d.jsx)(D.a,{onClick:function(e){e.preventDefault(),_()&&S("/login");var t={method:"POST",headers:{"Content-type":"application/json",Accepts:"application/json"},body:JSON.stringify({message:y,board_id:i.id})};fetch("/api/comments",t).then((function(e){return e.json()})).then((function(e){g([].concat(Object(P.a)(f),[e])),N("")}))},content:_()?"Login to comment":"Add Comment",labelPosition:"left",icon:"edit",floated:"right",secondary:!0})]})]})]})};var he=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){fetch("/api/boards").then((function(e){return e.json()})).then((function(e){JSON.stringify(e);c(e)}))}),[]),Object(d.jsxs)("div",{className:"background-purple",children:[Object(d.jsx)(p,{}),Object(d.jsxs)(S,{children:[Object(d.jsx)(C,{}),Object(d.jsx)("div",{className:"app-content",children:Object(d.jsxs)(o.d,{children:[Object(d.jsx)(o.b,{path:"/",element:Object(d.jsx)(h,{boards:n,page:"home"})}),Object(d.jsx)(o.b,{path:"/completed",element:Object(d.jsx)(h,{boards:n,page:"completed"})}),Object(d.jsx)(o.b,{path:"/create",element:Object(d.jsx)(k,{children:Object(d.jsx)(B,{})})}),Object(d.jsx)(o.b,{path:"/leaders",element:Object(d.jsx)($,{})}),Object(d.jsx)(o.b,{path:"/profile/:id",element:Object(d.jsx)(ne,{})}),Object(d.jsx)(o.b,{path:"/board/:id",element:Object(d.jsx)(Oe,{})}),Object(d.jsx)(o.b,{path:"/login",element:Object(d.jsx)(_,{})}),Object(d.jsx)(o.b,{path:"/signup",element:Object(d.jsx)(E,{})})]})})]})]})};n(189),n(190);i.a.createRoot(document.getElementById("root")).render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(f.a,{children:Object(d.jsx)(he,{})})}))}},[[191,1,2]]]);
//# sourceMappingURL=main.34640802.chunk.js.map