(this.webpackJsonpranktogether=this.webpackJsonpranktogether||[]).push([[0],{190:function(e,t,n){},191:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(157),i=n.n(r),s=n(7),o=n(9),l=n(223),j=n(226),d=n(1);var u=function(e){var t=e.board,n=Object(o.m)(),a=new Date(t.end_date).toLocaleDateString("en-US",{year:"numeric",month:"numeric",day:"numeric"});return Object(d.jsxs)(l.a,{className:"card-board-scroll",children:[Object(d.jsx)("img",{className:"card-size-homepage",onClick:function(){return e=t.id,void n("/board/".concat(e));var e},src:"https://storage.googleapis.com/ranktogether-images/".concat(t.options[0].option_image),wrapped:"true",ui:"false"}),Object(d.jsxs)(l.a.Content,{children:[Object(d.jsx)(l.a.Header,{children:t.title}),Object(d.jsx)(l.a.Meta,{children:Object(d.jsxs)(j.a,{as:"h4",onClick:function(){return e=t.user.id,void n("/profile/".concat(e));var e},className:"username",children:["Creator: ",t.user.username]})}),Object(d.jsxs)(l.a.Description,{children:["End Date: ",a]})]})]})};var b=function(e){var t=e.boards,n=e.category,a=e.page,c=t.filter((function(e){return e.category===n})).filter((function(e){var t=(new Date).getTime(),n=new Date(e.end_date).getTime();return"home"===a?n>=t:n<t})).map((function(e,t){return Object(d.jsx)(u,{board:e},t)}));return Object(d.jsx)(d.Fragment,{children:c})},O={ESPORTS:"eSports",GAMES:"Games",ANIMALS:"Animals",MOVIES:"Movies",SPORTS:"Sports",RELATIONSHIPS:"Relationships",TECHNOLOGY:"Technology",BUSINESS:"Business",MUSIC:"Music",FOOD:"Food",OTHER:"Other"};var h=function(e){var t=e.boards,n=e.page,a=Object.keys(O).map((function(e){return O[e]})).sort((function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())})).map((function(e){return Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"header-margin",children:Object(d.jsx)(j.a,{size:"large",children:e})}),Object(d.jsx)("div",{className:"board-margin",children:Object(d.jsx)(l.a.Group,{className:"board-scroll",children:Object(d.jsx)(b,{category:e,boards:t,page:n})})})]},e)}));return Object(d.jsx)("div",{className:"home",children:a})},m=n.p+"static/media/RankTogether.a6288087.png";var p=function(){return Object(d.jsx)("div",{children:Object(d.jsx)("img",{src:m,alt:"RankTogether GIF",id:"main-header"})})},x=n(22),f=c.a.createContext({user:null,signin:function(){},signout:function(){},setUser:function(){}}),g=n(215),v=n(48);var C=function(){Object(o.m)(),Object(o.j)();var e=Object(a.useState)("Home"),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useContext)(f);return Object(d.jsxs)(g.a,{className:"nav",inverted:!0,children:[Object(d.jsx)(g.a.Item,{name:"home",active:"home"===n,onClick:function(){return c("Home")},children:Object(d.jsx)(x.b,{to:"/",children:" Home "})}),Object(d.jsx)(g.a.Item,{name:"completed",active:"completed"===n,onClick:function(){return c("Completed")},children:Object(d.jsx)(x.b,{to:"/completed",children:" Completed "})}),Object(d.jsx)(g.a.Item,{name:"create",active:"create"===n,onClick:function(){return c("Create")},children:Object(d.jsx)(x.b,{to:"/create",children:" Create "})}),Object(d.jsx)(g.a.Item,{name:"leaders",active:"leaders"===n,onClick:function(){return c("Leaders")},children:Object(d.jsx)(x.b,{to:"/leaders",children:" Leaders "})}),r.user?Object(d.jsx)(g.a.Item,{name:"profile",active:"profile"===n,onClick:function(){return c("Profile")},position:"right",children:Object(d.jsx)(x.b,{to:"/profile/".concat(r.user.id),children:Object(d.jsx)(v.a,{name:"user circle"})})}):Object(d.jsx)(g.a.Item,{name:"login",active:"login"===n,onClick:function(){return c("Login")},position:"right",children:Object(d.jsx)(x.b,{to:"/login",children:"Login"})})]})},y=n(13),N=n(21);var S=function(e){var t=e.children,n=Object(a.useState)(null),c=Object(s.a)(n,2),r=c[0],i=c[1];Object(a.useEffect)((function(){fetch("/me").then((function(e){return e.json()})).then((function(e){e.errors||i(e)})).catch((function(e){console.log(e)}))}),[]);var o=function(){var e=Object(N.a)(Object(y.a)().mark((function e(t,n){var a;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})},e.abrupt("return",fetch("/login",a).then((function(e){return e.json()})).then((function(e){return e.error||i(e),e})).catch((function(e){console.log(e)})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=Object(N.a)(Object(y.a)().mark((function e(){return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/logout",{method:"DELETE"}).then((function(){i(null)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j={user:r,signin:o,signout:l,setUser:i};return Object(d.jsx)(f.Provider,{value:j,children:t})};var k=n(216),w=n(30),F=n(194),D=n(214),T=n(224);var A=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),i=Object(s.a)(r,2),l=i[0],u=i[1],b=Object(a.useState)(""),O=Object(s.a)(b,2),h=O[0],m=O[1],p=Object(a.useState)(""),x=Object(s.a)(p,2),f=x[0],g=x[1],C=Object(a.useState)(""),y=Object(s.a)(C,2),N=y[0],S=y[1],A=Object(a.useState)(""),E=Object(s.a)(A,2),_=E[0],I=E[1],P=Object(a.useState)(""),R=Object(s.a)(P,2),L=R[0],U=R[1],M=Object(a.useState)(""),B=Object(s.a)(M,2),J=B[0],z=B[1],H=Object(a.useState)(null),G=Object(s.a)(H,2),V=G[0],Y=G[1],X=Object(a.useState)(!1),$=Object(s.a)(X,2),q=($[0],$[1]),K=Object(o.m)();return Object(d.jsxs)("div",{className:"login-padding",children:[Object(d.jsxs)(j.a,{as:"h2",icon:!0,textAlign:"center",children:[Object(d.jsx)(v.a,{name:"user"}),"Create an Account!"]}),Object(d.jsx)("div",{className:"login-form",children:Object(d.jsxs)(k.a,{onSubmit:function(e){e.preventDefault(),z([]),q(!0);var t=new FormData;t.append("avatar",V),t.append("name",n),t.append("username",l),t.append("email",h),t.append("password",f),t.append("password",_),t.append("gender",L),t.append("date_of_birth",N),fetch("/signup",{method:"POST",headers:{Accept:"application/json"},body:t}).then((function(e){q(!1),e.ok?e.json().then((function(){return K("/login")})):e.json().then((function(e){return z(e.errors)}))}))},errors:0==J.length?"false":"true",children:[Object(d.jsxs)(k.a.Field,{children:[Object(d.jsx)("label",{children:"Name"}),Object(d.jsx)("input",{type:"text",name:"Name",placeholder:"Name",value:n,onChange:function(e){return c(e.target.value)}})]}),Object(d.jsxs)(k.a.Field,{children:[Object(d.jsx)("label",{children:"Username"}),Object(d.jsx)("input",{type:"text",name:"Username",placeholder:"Username",value:l,onChange:function(e){return u(e.target.value)}})]}),Object(d.jsxs)(k.a.Field,{children:[Object(d.jsx)("label",{children:"Email"}),Object(d.jsx)("input",{type:"email",name:"Email",placeholder:"Email",value:h,onChange:function(e){return m(e.target.value)}})]}),Object(d.jsxs)(k.a.Field,{children:[Object(d.jsx)("label",{children:"Password"}),Object(d.jsx)("input",{type:"password",name:"Password",placeholder:"Password",value:f,onChange:function(e){return g(e.target.value)}})]}),Object(d.jsxs)(k.a.Field,{children:[Object(d.jsx)("label",{children:"Re-enter Password"}),Object(d.jsx)("input",{type:"password",name:"Password",placeholder:"Re-enter your password",value:_,onChange:function(e){return I(e.target.value)}})]}),Object(d.jsxs)(k.a.Field,{children:[Object(d.jsx)("label",{children:"Birthdate"}),Object(d.jsx)("input",{type:"date",name:"Birthdate",placeholder:"Enter your date of birth",value:N,min:"1922-01-01",max:"2022-12-31",onChange:function(e){return S(e.target.value)}})]}),Object(d.jsxs)(w.a,{children:[Object(d.jsx)("label",{children:"Upload your avatar!"}),Object(d.jsx)(k.a.Input,{fluid:!0,label:"Avatar Chosen: ",placeholder:"Use button below to find your avatar",readOnly:!0,value:null===V||void 0===V?void 0:V.name}),Object(d.jsxs)(F.a,{as:"label",htmlFor:"file",type:"button",animated:"fade",children:[Object(d.jsx)(F.a.Content,{visible:!0,children:Object(d.jsx)(v.a,{name:"file"})}),Object(d.jsx)(F.a.Content,{hidden:!0,children:"Choose an Avatar"})]}),Object(d.jsx)("input",{type:"file",id:"file",hidden:!0,onChange:function(e){Y(e.target.files[0])}})]}),Object(d.jsx)(D.a,{placeholder:"Gender",fluid:!0,selection:!0,options:[{key:"Male",text:"Male",value:"Male"},{key:"Female",text:"Female",value:"Female"},{key:"Nonbinary",text:"Nonbinary",value:"Nonbinary"},{key:"Prefer not to answer",text:"Prefer not to answer",value:"Prefer noy to answer"}],onChange:function(e,t){return function(e,t){U(t.value)}(0,t)},value:L}),0!==J.length?Object(d.jsx)(T.a,{error:!0,header:"Action Forbidden",content:J}):null,Object(d.jsx)(F.a,{secondary:!0,style:{marginTop:"20px"},type:"submit",children:"Submit"})]})})]})};var E=function(){var e,t,n=Object(a.useState)(""),c=Object(s.a)(n,2),r=c[0],i=c[1],l=Object(a.useState)(""),j=Object(s.a)(l,2),u=j[0],b=j[1],O=Object(o.m)(),h=Object(o.j)(),m=Object(a.useContext)(f),p=Object(a.useState)(""),x=Object(s.a)(p,2),g=(x[0],x[1]),v=(null===(e=h.state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname)||"/";return Object(d.jsx)("div",{className:"login-padding",children:Object(d.jsx)("div",{className:"login-form",children:Object(d.jsxs)(k.a,{onSubmit:function(e){e.preventDefault(),m.signin(r,u).then((function(e){e.error?g(e.error):O(v,{replace:!0}),console.log(e)}))},children:[Object(d.jsxs)(k.a.Field,{children:[Object(d.jsx)("label",{children:"Username"}),Object(d.jsx)("input",{type:"text",onChange:function(e){return i(e.target.value)},placeholder:"Username"})]}),Object(d.jsxs)(k.a.Field,{children:[Object(d.jsx)("label",{children:"Password"}),Object(d.jsx)("input",{type:"password",value:u,onChange:function(e){return b(e.target.value)},placeholder:"Password"})]}),Object(d.jsx)(F.a,{secondary:!0,type:"submit",children:" Login "}),Object(d.jsx)("div",{children:Object(d.jsx)(F.a,{secondary:!0,style:{marginTop:"10px"},onClick:function(){O("/signup")},children:"Sign-up"})})]})})})},_=n(105),I=n(19),P=n(208),R=n(209),L=n(227),U=n.p+"static/media/CreateBoard.905d04b6.png";var M=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),i=Object(s.a)(r,2),j=i[0],u=i[1],b=Object(a.useState)([]),h=Object(s.a)(b,2),m=h[0],p=h[1],x=Object(a.useState)(""),f=Object(s.a)(x,2),g=f[0],C=f[1],y=Object(a.useState)(V()),N=Object(s.a)(y,2),S=N[0],T=N[1],A=Object(a.useState)(""),E=Object(s.a)(A,2),M=(E[0],E[1]),B=Object(a.useState)(""),J=Object(s.a)(B,2),z=J[0],H=J[1],G=Object(o.m)();function V(){var e=new Date;e.setDate(e.getDate()+1);var t=("0"+e.getDate()).slice(-2),n=("0"+(e.getMonth()+1)).slice(-2),a=e.getFullYear();return"".concat(a,"-").concat(n,"-").concat(t)}var Y=Object.keys(O).map((function(e){return{key:e,value:O[e],text:O[e]}}));return Object(d.jsxs)("div",{className:"create-form",children:[Object(d.jsx)("img",{src:U,alt:"CreateBoard",className:"create-board"}),Object(d.jsxs)(k.a,{onSubmit:function(e){if(e.preventDefault(),m.length<2)alert("Not enough options, min 2");else{M([]);var t=new FormData;t.append("title",n),t.append("description",j),t.append("category",g),t.append("end_date",S);z.split(",").map((function(e){t.append("tags[]",e.trim())}));m.map((function(e,n){t.append("options[]name",e.name),t.append("options[]option_image",e.option_image)})),fetch("/boards",{method:"POST",headers:{Accept:"application/json"},body:t}).then((function(e){return e.json()})).then((function(e){G("/board/".concat(e.id))}))}},children:[Object(d.jsxs)(k.a.Field,{children:[Object(d.jsx)("label",{children:"Title"}),Object(d.jsx)(P.a,{type:"text",name:"title",placeholder:"Title",value:n,onChange:function(e){return c(e.target.value)}})]}),Object(d.jsxs)(k.a.Field,{children:[Object(d.jsx)("label",{children:"Description"}),Object(d.jsx)(R.a,{type:"text",name:"description",placeholder:"Description",value:j,onChange:function(e){return u(e.target.value)}})]}),Object(d.jsx)("div",{className:"options-container",children:Object(d.jsx)(L.a,{children:Object(d.jsx)(L.a.Row,{columns:3,children:m.map((function(e,t){return Object(d.jsx)(L.a.Column,{children:Object(d.jsxs)(l.a,{children:[Object(d.jsxs)("div",{className:"card-img-container",children:[Object(d.jsx)("div",{className:"option-delete-btn",children:Object(d.jsx)(F.a,{circular:!0,icon:"delete",onClick:function(e){return function(e,t){var n=Object(I.a)(m);n.splice(t,1),p(n)}(0,t)}})}),Object(d.jsx)("img",{className:"card-img",src:URL.createObjectURL(e.option_image)})]}),Object(d.jsx)(l.a.Content,{children:Object(d.jsx)(l.a.Header,{children:Object(d.jsx)(P.a,{value:e.name,size:"large",placeholder:"Option Title",onChange:function(e){return function(e,t){var n=Object(I.a)(m),a=Object(_.a)({},n[t]);a.name=e.target.value,n[t]=a,p(n)}(e,t)}})})})]})},t)}))})})}),Object(d.jsxs)(w.a,{children:[Object(d.jsx)("label",{children:"Upload your options (min. 2 options - max. 6 options)"}),Object(d.jsxs)(F.a,{as:"label",htmlFor:"file",type:"button",animated:"fade",children:[Object(d.jsx)(F.a.Content,{visible:!0,children:Object(d.jsx)(v.a,{name:"file"})}),Object(d.jsx)(F.a.Content,{hidden:!0,children:"Upload Options!"})]}),Object(d.jsx)("input",{multiple:"multiple",type:"file",id:"file",hidden:!0,onChange:function(e){if(m.length+e.target.files.length>6)return alert("MAX options is 6!"),null;var t=Object(I.a)(e.target.files).map((function(e){return{name:e.name,option_image:e}}));p([].concat(Object(I.a)(m),Object(I.a)(t)))}})]}),Object(d.jsxs)(k.a.Field,{children:[Object(d.jsx)("label",{children:"Category"}),Object(d.jsx)(D.a,{placeholder:"Select Category",fluid:!0,search:!0,selection:!0,onChange:function(e,t){return function(e,t){C(t.value)}(0,t)},options:Y,value:g})]}),Object(d.jsxs)(k.a.Field,{children:[Object(d.jsx)("label",{children:"Tags"}),Object(d.jsx)(R.a,{type:"text",name:"tags",placeholder:"Tags",value:z,onChange:function(e){return H(e.target.value)}})]}),Object(d.jsxs)(k.a.Field,{children:[Object(d.jsx)("label",{children:"End Date"}),Object(d.jsx)("input",{type:"date",name:"End Date",value:S,min:V(),max:function(){var e=new Date;e.setDate(e.getDate()+14);var t=("0"+e.getDate()).slice(-2),n=("0"+(e.getMonth()+1)).slice(-2),a=e.getFullYear();return"".concat(a,"-").concat(n,"-").concat(t)}(),onChange:function(e){return T(e.target.value)}})]}),Object(d.jsx)(F.a,{secondary:!0,type:"submit",children:"Create Board!"})]})]})},B=n(211),J=n(225),z=n(210),H=n.p+"static/media/Ribbon.7a8f8292.png";var G=function(e){var t=e.group,n=Object(a.useState)([]),c=Object(s.a)(n,2),r=c[0],i=c[1],l=Object(o.m)();function u(e){l("/profile/".concat(e))}return Object(a.useEffect)((function(){fetch("rankers"===t?"/votes/toprankers":"/votes/topcreators").then((function(e){return e.json()})).then((function(e){i(e)}))}),[]),Object(d.jsx)(d.Fragment,{children:0===r.length?Object(d.jsx)(J.a,{active:!0,children:Object(d.jsx)(z.a,{size:"massive",children:"Loading"})}):Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"top-rank-image",children:Object(d.jsxs)("div",{onClick:function(){return u(r[0].user_id)},className:"ribbon-position",children:[Object(d.jsx)("img",{className:"rank-image-size",size:"medium",src:"https://storage.googleapis.com/ranktogether-images/".concat(r[0].avatar)}),Object(d.jsx)("img",{className:"ribbon",src:H}),Object(d.jsx)("div",{className:"header-topvoters",children:Object(d.jsxs)(j.a,{textAlign:"center",as:"h1",children:["#1: ",r[0].username]})})]})}),Object(d.jsxs)("div",{className:"rest-rank-image",children:[Object(d.jsxs)("div",{className:"pointer-cursor",onClick:function(){return u(r[1].user_id)},children:[Object(d.jsx)("img",{className:"rank-image-size",src:"https://storage.googleapis.com/ranktogether-images/".concat(r[1].avatar)}),Object(d.jsx)("div",{className:"header-topvoters",children:Object(d.jsxs)(j.a,{textAlign:"center",as:"h2",children:["#2: ",r[1].username]})})]}),Object(d.jsxs)("div",{className:"pointer-cursor",onClick:function(){return u(r[2].user_id)},children:[Object(d.jsx)("img",{className:"rank-image-size",src:"https://storage.googleapis.com/ranktogether-images/".concat(r[2].avatar)}),Object(d.jsx)("div",{className:"header-topvoters",children:Object(d.jsxs)(j.a,{textAlign:"center",as:"h2",children:["#3: ",r[2].username]})})]})]})]})})},V=n.p+"static/media/TRBanner.4433c072.png",Y=n.p+"static/media/TCBanner.65111173.png";var X=function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)("img",{src:V,alt:"TRBanner",className:"border-list"}),Object(d.jsx)(G,{group:"rankers"}),Object(d.jsx)(B.a,{inverted:!0,section:!0}),Object(d.jsx)("img",{src:Y,alt:"TCBanner",className:"border-list"}),Object(d.jsx)(G,{group:"creators"})]})},$=n(163),q=n(220),K=n(222),Q=n(228),W=n(221);var Z=function(e){var t=e.users,n=Object(o.m)(),a=t.map((function(e){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(W.a,{children:Object(d.jsx)(W.a.Item,{children:Object(d.jsxs)(j.a,{className:"followers-header",as:"h3",onClick:function(){return t=e.user_id,void n("/profile/".concat(t));var t},children:[Object(d.jsx)($.a,{circular:!0,src:"https://storage.googleapis.com/ranktogether-images/".concat(e.avatar)}),e.username]})})},e.user_id)})}));return Object(d.jsx)("div",{className:"followers-list",children:a})};var ee=function(e){var t=e.user,n=e.tab,c=Object(a.useState)([]),r=Object(s.a)(c,2),i=r[0],o=r[1];Object(a.useEffect)((function(){if(null!=t){var e="created"===n?"/boards/user/".concat(t.id):"/boards/ranked/".concat(t.id);fetch(e).then((function(e){return e.json()})).then((function(e){o(e)}))}}),[t,n]);var j=i.map((function(e){return Object(d.jsx)(u,{board:e},e.id)}));return Object(d.jsx)("div",{children:Object(d.jsx)(l.a.Group,{itemsPerRow:4,children:j})})};var te=function(){var e,t,n,c,r=Object(a.useContext)(f),i=Object(o.m)(),l=Object(a.useState)(""),u=Object(s.a)(l,2),b=u[0],O=u[1],h=Object(a.useState)({}),m=Object(s.a)(h,2),p=m[0],x=m[1],C=Object(a.useState)(!1),y=Object(s.a)(C,2),N=y[0],S=y[1],w=Object(a.useState)("Created"),D=Object(s.a)(w,2),T=D[0],A=D[1],E=Object(o.o)();return Object(a.useEffect)((function(){var e;(null===(e=r.user)||void 0===e?void 0:e.id)===parseInt(E.id)?x(r.user):fetch("/users/".concat(E.id)).then((function(e){return e.json()})).then((function(e){x(e)}))}),[E.id]),Object(d.jsxs)("div",{children:[(null===(e=r.user)||void 0===e?void 0:e.id)===p.id?Object(d.jsxs)(j.a,{className:"profile-form",as:"h2",icon:!0,children:[Object(d.jsx)(v.a,{name:"user circle"}),"My Profile"]}):null,Object(d.jsxs)("div",{className:"image-profile",children:[(null===(t=r.user)||void 0===t?void 0:t.id)===p.id?Object(d.jsx)(F.a,{secondary:!0,onClick:function(){r.signout().then((function(){return i("/")}))},className:"logout-button",children:"Logout"}):null,Object(d.jsx)(j.a,{className:"header-padding",as:"h1",textAlign:"center",children:p.username}),Object(d.jsx)($.a,{className:"border-image",src:"https://storage.googleapis.com/ranktogether-images/".concat(p.avatar),size:"medium",circular:!0,centered:!0}),Object(d.jsx)(q.a.Description,{children:Object(d.jsx)(j.a,{className:"header-padding",as:"h2",textAlign:"center",children:p.bio})}),(null===(n=r.user)||void 0===n?void 0:n.id)===p.id?Object(d.jsxs)(K.a,{closeIcon:!0,open:N,trigger:Object(d.jsx)(F.a,{secondary:!0,className:"button-center",children:"About Me"}),onClose:function(){return S(!N)},onOpen:function(){return S(!N)},centered:!0,children:[Object(d.jsx)(j.a,{icon:"pencil alternate",content:"About Me"}),Object(d.jsxs)(k.a,{onSubmit:function(e){e.preventDefault();var t={method:"PATCH",headers:{"Content-type":"application/json",Accepts:"application/json"},body:JSON.stringify({bio:b})};fetch("/users/".concat(p.id),t).then((function(e){return e.json()})).then((function(e){x(e),S(!N),r.setUser(e)}))},children:[Object(d.jsx)(R.a,{type:"text",name:"bio",placeholder:"Tell us about yourself",value:b,onChange:function(e){return O(e.target.value)}}),Object(d.jsx)(P.a,{type:"submit",className:"button-margin"})]})]}):null,Object(d.jsxs)(d.Fragment,{children:[(null===(c=r.user)||void 0===c?void 0:c.id)===(null===p||void 0===p?void 0:p.id)?null:Object(d.jsx)("div",{children:function(){var e,t=null===(e=r.user)||void 0===e?void 0:e.followings;return null==(null===t||void 0===t?void 0:t.find((function(e){return e.user_id===p.id})))}()?Object(d.jsx)(F.a,{className:"button-center",positive:!0,onClick:function(e){e.preventDefault();var t={method:"POST",headers:{"Content-type":"application/json",Accepts:"application/json"},body:JSON.stringify({user_id:p.id})};fetch("/follow",t).then((function(e){return e.json()})).then((function(e){var t=JSON.parse(JSON.stringify(r.user));t.followings.push(e),r.setUser(t)}))},children:"\ud83d\udc49 Follow"}):Object(d.jsx)(F.a,{className:"button-center",negative:!0,onClick:function(e){e.preventDefault();var t={method:"DELETE",headers:{"Content-type":"application/json",Accepts:"application/json"},body:JSON.stringify({user_id:p.id})};fetch("/unfollow",t).then((function(){var e=JSON.parse(JSON.stringify(r.user));e.followings=e.followings.filter((function(e){return p.id!==e.user_id})),r.setUser(e)}))},children:"Unfollow"})})," "]}),Object(d.jsxs)("div",{className:"profile-navbar",children:[Object(d.jsxs)(g.a,{pointing:!0,secondary:!0,children:[Object(d.jsx)(g.a.Item,{name:"Created",active:"Created"===T,onClick:function(){return A("Created")}}),Object(d.jsx)(g.a.Item,{name:"Ranked",active:"Ranked"===T,onClick:function(){return A("Ranked")}}),Object(d.jsx)(g.a.Item,{name:"Followers",active:"Followers"===T,onClick:function(){return A("Followers")}}),Object(d.jsx)(g.a.Item,{name:"Following",active:"Following"===T,onClick:function(){return A("Following")}})]}),Object(d.jsx)(Q.a,{children:function(){switch(T){case"Created":return Object(d.jsx)(ee,{user:p,tab:"created"});case"Ranked":return Object(d.jsx)(ee,{user:p,tab:"ranked"});case"Followers":return Object(d.jsx)(Z,{users:p.followers});case"Following":return Object(d.jsx)(Z,{users:p.followings})}}()})]})]})]})},ne=n(219),ae=n(195),ce="card",re=n(217),ie=n(218);var se=function(e){var t=e.option,n=e.idx,c=e.moveCard,r=e.userVote,i=Object(a.useRef)(null),o=Object(re.a)({accept:ce,collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var a;if(i.current){var s=e.index,o=n;if(s!==o){var l=null===(a=i.current)||void 0===a?void 0:a.getBoundingClientRect(),j=(l.bottom-l.top)/2,d=t.getClientOffset().y-l.top;s<o&&d<j||s>o&&d>j||(null==r&&c(s,o),e.index=o)}}}}),u=Object(s.a)(o,2),b=u[0].handlerId,O=u[1],h=Object(ie.a)({type:ce,item:function(){return{id:t.id,index:n}},collect:function(e){return{isDragging:e.isDragging()}}}),m=Object(s.a)(h,2);return m[0].isDragging,(0,m[1])(O(i)),Object(d.jsx)(ae.a,{innerRef:i,children:Object(d.jsx)(L.a.Column,{"data-handler-id":b,children:Object(d.jsxs)(l.a,{centered:!0,className:"card-margin",children:[null!=r?Object(d.jsx)("div",{className:"one-option-vote",children:Object(d.jsxs)(j.a,{textAlign:"center",as:"h2",children:["Your rank: ",function(){if(null!=r)return r.rankings.indexOf(t.id)+1}()]})}):null,Object(d.jsx)("div",{className:"card-img-container",children:Object(d.jsx)("img",{className:"card-img",src:"https://storage.googleapis.com/ranktogether-images/".concat(t.option_image)})}),Object(d.jsx)(l.a.Content,{children:Object(d.jsxs)(l.a.Header,{children:[Object(d.jsx)("div",{className:"board-option-name",children:t.name}),Object(d.jsx)("div",{className:"board-option-number",children:Object(d.jsxs)("h4",{children:[" ",n+1," "]})})]})})]})})})},oe=n(161),le=n.n(oe),je=n(213),de=n(162);var ue=function(e){var t,n=e.comment,c=(e.idx,e.removeComment),r=e.handleClickCreator,i=Object(a.useContext)(f),s=new Date(n.created_at).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"numeric",day:"numeric"});return Object(d.jsxs)(ne.a,{children:[Object(d.jsx)(ne.a.Avatar,{className:"avatar-border",src:"https://storage.googleapis.com/ranktogether-images/".concat(n.avatar)}),Object(d.jsxs)(ne.a.Content,{children:[Object(d.jsx)(ne.a.Author,{onClick:function(){return r(n.user_id)},as:"a",children:n.username}),Object(d.jsx)(ne.a.Metadata,{children:Object(d.jsx)("div",{children:s})}),Object(d.jsx)(ne.a.Text,{children:n.message}),Object(d.jsx)(ne.a.Actions,{children:(null===(t=i.user)||void 0===t?void 0:t.id)===n.user_id?Object(d.jsx)(F.a,{onClick:function(){return c(n)},circular:!0,icon:"delete"}):null})]})]})};var be=function(){var e=Object(a.useContext)(f),t=Object(o.o)(),n=parseInt(t.id),c=Object(a.useState)(null),r=Object(s.a)(c,2),i=r[0],l=r[1],u=Object(a.useState)([]),b=Object(s.a)(u,2),O=b[0],h=b[1],m=Object(a.useState)([]),p=Object(s.a)(m,2),x=p[0],g=p[1],v=Object(a.useState)(""),C=Object(s.a)(v,2),y=C[0],N=C[1],S=Object(o.m)();function w(e){S("/profile/".concat(e))}Object(a.useEffect)((function(){fetch("/boards/".concat(n)).then((function(e){return e.json()})).then((function(e){l(e),T()&&(e.options=e.options.sort((function(e,t){return t.score-e.score}))),h(e.options),g(e.comments)}))}),[e.user]);var D=Object(a.useCallback)((function(e,t){h((function(n){return le()(n,{$splice:[[e,1],[t,0,n[e]]]})}))}),[]);function T(){var t;return null!=(null===(t=e.user)||void 0===t?void 0:t.votes.find((function(e){return(null===i||void 0===i?void 0:i.id)===e.board_id})))}function A(){var t;return null===(t=e.user)||void 0===t?void 0:t.votes.find((function(e){return(null===i||void 0===i?void 0:i.id)===e.board_id}))}function E(){var t;return null==(null===(t=e.user)||void 0===t?void 0:t.id)}function _(e){fetch("/comments/".concat(e.id),{method:"DELETE",headers:{"Content-type":"application/json",Accepts:"application/json"}}).then((function(){for(var t=Object(I.a)(x),n=0,a=0;a<t.length;a++){if(t[a].id===e.id){n=a;break}}t.splice(n,1),g(t)}))}var P=O.map((function(e,t){return Object(d.jsx)(se,{option:e,idx:t,moveCard:D,userVote:A()},e.id)})),R=x.map((function(e,t){return Object(d.jsx)(ue,{comment:e,idx:t,removeComment:_,handleClickCreator:w},e.id)}));return Object(d.jsxs)(je.a,{backend:de.a,children:[Object(d.jsx)("div",{children:null===i?Object(d.jsx)(J.a,{active:!0,children:Object(d.jsx)(z.a,{size:"massive",children:"Loading"})}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"header-board",children:[Object(d.jsx)(j.a,{as:"h1",children:i.title}),Object(d.jsx)(j.a,{as:"h2",children:i.description}),Object(d.jsx)(j.a,{className:"creator-click",onClick:function(){return w(i.user.id)},as:"h3",children:i.user.username})]}),Object(d.jsx)("div",{children:T()?Object(d.jsxs)(j.a,{className:"total-votes",as:"h2",children:["Total Votes: ",i.vote_count]}):null}),Object(d.jsx)(L.a,{className:function(){var e=O.length;return 2===e||4===e?"grid-margin grid-width-30":"grid-margin grid-width-50"}(),centered:!0,children:Object(d.jsx)(L.a.Row,{columns:function(){var e=O.length;return 2===e||4===e?2:3}(),children:P})})]})}),Object(d.jsx)("div",{className:"vote-button",children:T()?null:Object(d.jsx)(F.a,{onClick:function(t){t.preventDefault(),E()&&S("/login");var n=O.map((function(e){return e.id})),a={method:"POST",headers:{"Content-type":"application/json",Accepts:"application/json"},body:JSON.stringify({board_id:i.id,rankings:n})};fetch("/votes",a).then((function(e){return e.json()})).then((function(t){e.setUser(t.user)}))},size:"huge",secondary:!0,children:E()?"Login to vote!":"Vote!"})}),Object(d.jsxs)("div",{className:"comments-section",children:[Object(d.jsx)(ne.a.Group,{children:Object(d.jsxs)(j.a,{as:"h3",dividing:!0,children:["Comments!",R]})}),Object(d.jsxs)(k.a,{children:[E()?null:Object(d.jsx)(k.a.TextArea,{className:"comment-box",value:y,onChange:function(e){return N(e.target.value)}}),Object(d.jsx)(F.a,{onClick:function(e){e.preventDefault(),E()&&S("/login");var t={method:"POST",headers:{"Content-type":"application/json",Accepts:"application/json"},body:JSON.stringify({message:y,board_id:i.id})};fetch("/comments",t).then((function(e){return e.json()})).then((function(e){g([].concat(Object(I.a)(x),[e])),N("")}))},content:E()?"Login to comment":"Add Comment",labelPosition:"left",icon:"edit",floated:"right",secondary:!0})]})]})]})};var Oe=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){fetch("/boards").then((function(e){return e.json()})).then((function(e){JSON.stringify(e);c(e)}))}),[]),Object(d.jsxs)("div",{className:"background-purple",children:[Object(d.jsx)(p,{}),Object(d.jsxs)(S,{children:[Object(d.jsx)(C,{}),Object(d.jsx)("div",{className:"app-content",children:Object(d.jsxs)(o.d,{children:[Object(d.jsx)(o.b,{path:"/",element:Object(d.jsx)(h,{boards:n,page:"home"})}),Object(d.jsx)(o.b,{path:"/completed",element:Object(d.jsx)(h,{boards:n,page:"completed"})}),Object(d.jsx)(o.b,{path:"/create",element:Object(d.jsx)(M,{})}),Object(d.jsx)(o.b,{path:"/leaders",element:Object(d.jsx)(X,{})}),Object(d.jsx)(o.b,{path:"/profile/:id",element:Object(d.jsx)(te,{})}),Object(d.jsx)(o.b,{path:"/board/:id",element:Object(d.jsx)(be,{})}),Object(d.jsx)(o.b,{path:"/login",element:Object(d.jsx)(E,{})}),Object(d.jsx)(o.b,{path:"/signup",element:Object(d.jsx)(A,{})})]})})]})]})};n(189),n(190);i.a.createRoot(document.getElementById("root")).render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(x.a,{children:Object(d.jsx)(Oe,{})})}))}},[[191,1,2]]]);
//# sourceMappingURL=main.ebbaa6b5.chunk.js.map